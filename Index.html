<!doctype html>
<html lang="pt">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Cadastro de Funcionários - Empresa</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdn.datatables.net/1.11.5/css/dataTables.bootstrap5.min.css" rel="stylesheet">
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.inputmask/5.0.8/jquery.inputmask.min.js"></script>
    <script src="https://cdn.datatables.net/1.11.5/js/jquery.dataTables.min.js"></script>
    <script src="https://cdn.datatables.net/1.11.5/js/dataTables.bootstrap5.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <style>
        .nav-link {
            font-weight: bold;
            font-style: italic;
        }
        .active-page {
            color: #fff !important;
            background-color: #0d6efd !important;
            border-radius: 5px;
            padding: 5px 10px;
        }
    </style>
</head>
<body>
    <nav class="navbar navbar-expand-lg navbar-dark bg-dark">
        <div class="container-fluid">
            <a class="navbar-brand" href="#">
                <img src="https://png.pngtree.com/png-clipart/20220806/ourmid/pngtree-bearded-man-logo-png-image_6100735.png" alt="Empresa" width="50" height="50">
            </a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav">
                    <li class="nav-item">
                        <a class="nav-link" id="home" href="#home">Home</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" id="equipe" href="#equipe">Equipe</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" id="demitidos" href="#demitidos">Demitidos</a>
                    </li>
                </ul>
            </div>
        </div>
    </nav>

    <div class="container mt-4">
        <div class="tab-content">
            <div class="tab-pane fade show active" id="home">
                <div class="card p-4">
                    <h2 class="text-primary">Painel de Gestão</h2>
                    <div class="row text-center">
                        <div class="col-md-3">
                            <div class="card bg-info text-white p-3">
                                <h5>Funcionários Cadastrados</h5>
                                <h3 id="totalCadastrados">0</h3>
                            </div>
                        </div>
                        <div class="col-md-3">
                            <div class="card bg-danger text-white p-3">
                                <h5>Demitidos</h5>
                                <h3 id="totalDemitidos">0</h3>
                            </div>
                        </div>
                        <div class="col-md-3">
                            <div class="card bg-warning text-dark p-3">
                                <h5>Atrasados</h5>
                                <h3 id="totalAtrasados">0</h3>
                            </div>
                        </div>
                        <div class="col-md-3">
                            <div class="card bg-success text-white p-3">
                                <h5>No Horário</h5>
                                <h3 id="totalNoHorario">0</h3>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="container mt-4">
        <div class="tab-content">
            <div class="tab-pane fade show active" id="equipe">
                <div class="card">
                    <div class="card-header bg-primary text-white">
                        <h5>Cadastro de Funcionários</h5>
                    </div>
                    <div class="card-body">
                        <form id="formFuncionario">
                            <div class="row">
                                <div class="col-md-6 mb-3">
                                    <label class="form-label">Nome</label>
                                    <input type="text" class="form-control" id="nome" required>
                                </div>
                                <div class="col-md-6 mb-3">
                                    <label class="form-label">Cargo</label>
                                    <input type="text" class="form-control" id="cargo" required>
                                </div>
                                <div class="col-md-6 mb-3">
                                    <label class="form-label">CPF</label>
                                    <input type="text" class="form-control" id="cpf" required>
                                </div>
                                <div class="col-md-6 mb-3">
                                    <label class="form-label">Telefone</label>
                                    <input type="text" class="form-control" id="telefone" required>
                                </div>
                                <div class="col-md-12 mb-3">
                                    <label class="form-label">E-mail</label>
                                    <input type="email" class="form-control" id="email" required>
                                </div>
                            </div>
                            <button type="submit" class="btn btn-success">Cadastrar</button>
                        </form>
                    </div>
                </div>
                <div class="card mt-4">
                    <div class="card-header bg-primary text-white">
                        <h5>Lista de Funcionários</h5>
                    </div>
                    <div class="card-body">
                        <table id="tabelaFuncionarios" class="table table-striped">
                            <thead class="table-dark">
                                <tr>
                                    <th>Nome</th>
                                    <th>Cargo</th>
                                    <th>CPF</th>
                                    <th>Telefone</th>
                                    <th>E-mail</th>
                                    <th>Ações</th>
                                </tr>
                            </thead>
                            <tbody></tbody>
                        </table>
                    </div>
                </div>
            </div>

            <div class="tab-pane fade" id="demitidos">
                <h2>Lista de Demitidos</h2>
                <table id="tabelaDemitidos" class="table table-striped">
                    <thead class="table-dark">
                        <tr>
                            <th>Nome</th>
                            <th>Cargo</th>
                        </tr>
                    </thead>
                    <tbody></tbody>
                </table>
            </div>
        </div>
    </div>

    <script>
        $(document).ready(function() {
            var tabela = $('#tabelaFuncionarios').DataTable();
            var tabelaDemitidos = $('#tabelaDemitidos').DataTable();
    
            var totalFuncionarios = 200; // Agora temos 200 funcionários
            var demitidos = 0, noHorario = 0, atrasados = 0;
    
            function gerarFuncionarios() {
                for (let i = 1; i <= totalFuncionarios; i++) {
                    let nome = "Funcionário " + i;
                    let cargo = "Cargo " + i;
                    let cpf = "000.000.000-" + (i % 99).toString().padStart(2, '0');
                    let telefone = "(99) 99999-" + (i % 9999).toString().padStart(4, '0');
                    let email = "func" + i + "@empresa.com";
                    let status = Math.random();
    
                    if (status < 0.3) { 
                        tabelaDemitidos.row.add([nome, cargo]).draw(false);
                        demitidos++;
                    } else {
                        tabela.row.add([nome, cargo, cpf, telefone, email, '<button class="btn btn-warning btn-sm btnDemitir">Demitir</button>']).draw(false);
                        if (status < 0.8) noHorario++; else atrasados++;
                    }
                }
            }
    
            gerarFuncionarios();
            atualizarHome();
    
            // Ao clicar no botão "Demitir"
            $('#tabelaFuncionarios tbody').on('click', '.btnDemitir', function() {
                var row = $(this).parents('tr');
                var data = tabela.row(row).data();
                tabela.row(row).remove().draw();
                tabelaDemitidos.row.add([data[0], data[1]]).draw(false);
                demitidos++;
                atualizarHome();
            });
    
            // Ao adicionar um novo funcionário fictício
            $('#btnAdicionarFuncionario').click(function() {
                var novoId = totalFuncionarios + 1;
                var nome = "Funcionário " + novoId;
                var cargo = "Cargo " + novoId;
                var cpf = "000.000.000-" + (novoId % 99).toString().padStart(2, '0');
                var telefone = "(99) 99999-" + (novoId % 9999).toString().padStart(4, '0');
                var email = "func" + novoId + "@empresa.com";
                
                tabela.row.add([nome, cargo, cpf, telefone, email, '<button class="btn btn-warning btn-sm btnDemitir">Demitir</button>']).draw(false);
                totalFuncionarios++;
                noHorario++;
                atualizarHome();
            });

            function atualizarHome() {
                $('#totalCadastrados').text(totalFuncionarios);
                $('#totalDemitidos').text(demitidos);
                $('#totalAtrasados').text(atrasados);
                $('#totalNoHorario').text(noHorario);
            }

            $('#formFuncionario').submit(function(event) {
                event.preventDefault();
                var nome = $('#nome').val();
                var cargo = $('#cargo').val();
                var cpf = $('#cpf').val();
                var telefone = $('#telefone').val();
                var email = $('#email').val();

                if (nome && cargo && cpf && telefone && email) {
                    tabela.row.add([
                        nome, cargo, cpf, telefone, email,
                        '<button class="btn btn-warning btn-sm btnDemitir">Demitir</button>'
                    ]).draw(false);
                    
                    totalFuncionarios++;
                    noHorario++;
                    atualizarHome();

                    $('#formFuncionario')[0].reset();
                } else {
                    alert("Preencha todos os campos!");
                }
            });
            $('.nav-link').click(function() {
            $('.nav-link').removeClass('active-page');
            $(this).addClass('active-page');

            let target = $(this).attr('href');
            ('.tab-pane').removeClass('show active');
            $(target).addClass('show active');
            });

        });
    </script>
</body>
</html>
